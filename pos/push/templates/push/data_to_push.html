{% extends 'base.html' %}
{% load static %}
{% block content %}
    <style type="text/css">
        .success{
            list-style: none;
            background-color: #26eda4;
            color: white;
            box-shadow: 12px 12px 12px #e61c66;
            text-align: center;
        }
    </style>
    <br>
    <br>
    <!-- {% url 'push:usage' %} -->
      <div class="row col-md-12">
        <p class="span6" style="float: none; margin:auto;">
        <a class="btn btn-warning my-2 my-sm-0" id="usage" name="push" type="button"
         href="{% url 'push:usage' %}">
            Upload To Server &#8593</a> 
        </p>
        <!-- start added for DB Push-->
        <p class="span6" style="float: none; margin:auto;">
          <a class="btn btn-warning my-2 my-sm-0" id="dbpush" name="dbpush" type="button"
          href="{% url 'push:dbpush' %}">
              Upload DBPush Data &#8593</a> 
       </p>
       <!-- end added for DB Push-->
        <p class="span6" style="float: none; margin:auto;">
            <a class="btn btn-warning my-2 my-sm-0" id="backup" type="button" href="{% url 'push:backup' %}">
                Backup Data
            </a> 
            </p>
            <p class="span6" style="float: none; margin:auto;">
                <a class="btn btn-warning my-2 my-sm-0" id="clear" type="button" href="{% url 'push:clear' %}">
                Delete Data</a> 
            </p>
            <p class="span6" style="float: none; margin:auto;">
                <a class="btn btn-warning my-2 my-sm-0" id="desktop" type="button" href="{% url 'push:desktop' %}">DeskTop Data</a> 
            </p>
      </div>
      <!-- The Modal -->
      <div class="container modal text-center" id="popup">
        <div class="modal-dialog">
          <div class="modal-content">

            <!-- Modal Header -->
            <div class="modal-header">
              <h4 class="modal-title">Data Push</h4>
              <!-- <button type="button" class="close" data-dismiss="modal">&times;</button> -->
            </div>

            <!-- Modal body -->
            <div class="modal-body" id="pushdetails">
                <div class="loading" id="loaded" style="display:none;">
                    <div class="loader">
                    </div>
                    <button class="btn btn-primary" disabled>
                                <span class="spinner-grow spinner-grow-sm"></span>
                                Please wait while data is uploading!!
                        </button>
                </div>

            </div>

          </div>
        </div>
      </div>
      <!-- The Modal for DB Push -->
      <div class="container modal text-center" id="popupdbpush">
        <div class="modal-dialog">
          <div class="modal-content">

            <!-- Modal Header -->
            <div class="modal-header">
              <h4 class="modal-title">Data Push</h4>
              <!-- <button type="button" class="close" data-dismiss="modal">&times;</button> -->
            </div>

            <!-- Modal body -->
            <div class="modal-body" id="pushdetailsdb">
                <div class="loading" id="loadeddbpush" style="display:none;">
                    <div class="loader">
                    </div>
                    <button class="btn btn-primary" disabled>
                                <span class="spinner-grow spinner-grow-sm"></span>
                                Please wait while database is uploading!!
                        </button>
                </div>

            </div>

          </div>
        </div>
      </div>

      <!-- The Modal -->
      <div class="container modal text-center" id="popupBkp">
        <div class="modal-dialog">
          <div class="modal-content">

            <!-- Modal Header -->
            <div class="modal-header">
              <h4 class="modal-title">Data Backup</h4>
              <!-- <button type="button" class="close" data-dismiss="modal">&times;</button> -->
            </div>

            <!-- Modal body -->
            <div class="modal-body" id="pushdetailsBkp">
                <div class="loading" id="loadedBkp" style="display:none;">
                    <div class="loader">
                    </div>
                    <button class="btn btn-primary" disabled>
                                <span class="spinner-grow spinner-grow-sm"></span>
                                Please wait while we take backup of your data!!
                        </button>
                </div>

            </div>

          </div>
        </div>
      </div>

    <!-- The Modal -->
      <div class="container modal text-center" id="cleardata">
        <div class="modal-dialog">
          <div class="modal-content">

            <!-- Modal Header -->
            <div class="modal-header">
              <h4 class="modal-title">Data clear</h4>
              <!-- <button type="button" class="close" data-dismiss="modal">&times;</button> -->
            </div>

            <!-- Modal body -->
            <div class="modal-body" id="pushdetailsclear">
                <div class="loading" id="loadedclear" style="display:none;">
                    <div class="loader">
                    </div>
                    <button class="btn btn-primary" disabled>
                                <span class="spinner-grow spinner-grow-sm"></span>
                                Please wait while we delete the data!!
                        </button>
                </div>

            </div>

          </div>
        </div>
      </div>

      <!-- The Modal -->
      <div class="container modal text-center" id="desktopdata">
        <div class="modal-dialog">
          <div class="modal-content">

            <!-- Modal Header -->
            <div class="modal-header">
              <h4 class="modal-title">DesktopData Push</h4>
              <!-- <button type="button" class="close" data-dismiss="modal">&times;</button> -->
            </div>

            <!-- Modal body -->
            <div class="modal-body" id="pushdesktop">
                <div class="loading" id="loadedesktop" style="display:none;">
                    <div class="loader">
                    </div>
                    <button class="btn btn-primary" disabled>
                                <span class="spinner-grow spinner-grow-sm"></span>
                                Please wait while we Push the desktop data!!
                        </button>
                </div>

            </div>

          </div>
        </div>
      </div>

      <!-- Modal -->
        <div id="pushModal" class="modal fade" role="dialog">
            <div class="modal-dialog">

                <!-- Modal content-->
                <div class="modal-content">
                <div class="modal-body">
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" data-dismiss="modal">OK</button>
                </div>
                </div>

            </div>
        </div>

    <script>
        
        $('#usage').click(function () {
                $.ajax({
                    type: 'POST',
                    crossDomain: true,
                    dataType: "json",
                    beforeSend: function(){
                        $('#popup').show();
                        $('#loaded').show();
                    },
                    success: function(){
                        $('#popup').hide();
                        $('#loaded').hide();
                        $('#pushModal .modal-body').html('<p>Usage Data Pushed Successfully!</p>');
                        $('#pushModal').modal('show')
                    },
                    error: function (error) {
                        console.log('error; ' + eval(error));
                    }
                });
            });
          // added for DB Push
            $('#dbpush').click(function () {
                $.ajax({
                    type: 'POST',
                    crossDomain: true,
                    dataType: "jsonp",
                    beforeSend: function(){
                        $('#popupdbpush').show();
                        $('#loadeddbpush').show();
                    },
                    success: function(){
                        $('#popupsbpush').hide();
                        $('#loadeddbpush').hide();
                        $('#pushModal .modal-body').html('<p>DB Pushed Successfully!</p>');
                        $('#pushModal').modal('show')
                    },
                    error: function (error) {
                        console.log('error; ' + eval(error));
                    }
                });
            });    
        $('#backup').click(function () {
                $.ajax({
                    type: 'POST',
                    crossDomain: true,
                    dataType: "jsonp",
                    beforeSend: function(){
                        $('#popupBkp').show();
                        $('#loadedBkp').show();
                    },
                    success: function(){
                        $('#popupBkp').hide();
                        $('#loadedBkp').hide();
                        // $('#pushModal .modal-body').html('<p>Data Backup is Successful!</p>');
                        // $('#pushModal').modal('show')
                        alert("success")
                    },
                    error: function (error) {
                        console.log('error; ' + eval(error));
                    }
                });
            });
        $('#clear').click(function () {
                $.ajax({
                    type: 'POST',
                    crossDomain: true,
                    dataType: "jsonp",
                    beforeSend: function(){
                        $('#cleardata').show();
                        $('#loadedclear').show();
                    },
                    success: function(){
                        $('#cleardata').hide();
                        $('#loadedclear').hide();
                        $('#pushModal .modal-body').html('<p>Data Deleted Successfully!</p>');
                        $('#pushModal').modal('show')
                    },
                    error: function (error) {
                        console.log('error; ' + eval(error));
                    }
                });
            });
            $('#desktop').click(function () {
                $.ajax({
                    type: 'POST',
                    crossDomain: true,
                    dataType: "jsonp",
                    beforeSend: function(){
                        $('#desktopdata').show();
                        $('#loadedesktop').show();
                    },
                    success: function(){
                        $('#desktopdata').hide();
                        $('#loadedesktop').hide();
                        $('#pushModal .modal-body').html('<p>Desktop Data Pushed Successfully!</p>');
                        $('#pushModal').modal('show')
                    },
                    error: function (error) {
                        console.log('error; ' + eval(error));
                    }
                });
            });

    </script>

{% endblock %}